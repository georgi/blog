<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">

<html>
    <head>
        <title>
            Matthias Georgi
        </title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Atom 1.0">
        <link rel="stylesheet" media="screen" type="text/css" href="/style.css">
        <link rel="stylesheet" href="/zenburn.css">
        <script src="/highlight.pack.js">
            
        </script>
        <script>
            hljs.initHighlightingOnLoad();
        </script>
    </head>
    <body>
        <div class="container">
            <h2 id="header">
                <a href="/">
                    Matthias Georgi
                </a>
            </h2>
            <div class="content">
                <div class="article">
                    <h1>
                        <a href="/2011/6/quick-guide-for-passenger-on-natty-narwhal.html">
                            Quick Guide for Passenger on Natty Narwhal
                        </a>
                    </h1>
                    <p>This is a short guide for installing <a href="http://www.modrails.com/">Phusion Passenger</a> and <a href="http://www.rubyenterpriseedition.com/">Ruby
Enterprise Editition</a> on Ubuntu Natty Narwhal. Depending on your machine
this will take 30-60 minutes on a fresh Ubuntu install.</p>

<h3>Installing build tools and libraries</h3>

<p>First we need to install the compiler toolchain (make, gcc and libc)
and necessary libraries.</p>

<pre><code>$ apt-get install build-essential zlib1g-dev libssl-dev libreadline5-dev libmysqlclient-dev
</code></pre>

<h3>Ruby Enterprise Edition</h3>

<p>We are going to download and compile Ruby Enterprise Edition. The
installer asks for the target directory.  I would recommend to install
into /opt/ruby unless you want to host different versions on this machine.</p>

<pre><code>$ wget http://rubyenterpriseedition.googlecode.com/files/ruby-enterprise-1.8.7-2011.03.tar.gz
$ tar xzf ruby-enterprise-1.8.7-2011.03.tar.gz
$ cd ruby-enterprise-1.8.7-2011.03
$ ./installer
</code></pre>

<p>Now we include the path to the ruby binaries in /etc/environment. It should look like this:</p>

<pre><code>PATH=&quot;/opt/ruby/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games&quot;
</code></pre>

<p>After relogin you should be able to type ruby -v and get a response like this:    </p>

<pre><code>ruby 1.8.7 (2011-02-18 patchlevel 334) [x86_64-linux], MBARI 0x6770, Ruby Enterprise Edition 2011.03
</code></pre>

<h3>Apache and Passenger</h3>

<p>We need to install Apache and necessary development libraries to compile Phusion Passenger. </p>

<pre><code>$ apt-get install libcurl4-openssl-dev apache2-mpm-prefork apache2-prefork-dev libapr1-dev libaprutil1-dev
$ passenger-install-apache2-module
</code></pre>

<h3>Apache configuration</h3>

<p>The compilation of the Passenger Apache
module finished with an instruction for your httpd.conf. Depending on
you passenger version, you will get something like this, which you add
to your <code>/etc/apache2/httpd.conf</code>:</p>

<pre><code>LoadModule passenger_module /opt/ruby/lib/ruby/gems/1.8/gems/passenger-3.0.7/ext/apache2/mod_passenger.so
PassengerRoot /opt/ruby/lib/ruby/gems/1.8/gems/passenger-3.0.7
PassengerRuby /opt/ruby/bin/ruby
</code></pre>

<p>If you browse to your url, you should see the standard apache &ldquo;It works&rdquo; page.</p>

<h3>MySQL</h3>

<p>The Ruby Enterprise Installer already compiled Ruby&#39;s mysql client
library, now we need the server and client.  </p>

<pre><code>$ apt-get install mysql-server mysql-client
</code></pre>

<h3>Virtual host config</h3>

<p>Adding a virtual host for your rails application is easy. Assuming
that your application resides in /var/www/myapp create a file named
<code>/etc/apache2/sites-available/myapp</code> and fill in :</p>

<pre><code>&lt;VirtualHost *:80&gt;
    ServerName myserver.com
    DocumentRoot /var/www/myapp/public
&lt;/VirtualHost&gt;
</code></pre>

<p>Now we disable the default site and add our new virtual host:</p>

<pre><code>$ a2dissite default
$ a2ensite myapp
</code></pre>

<p>After restarting Apache your Rails application should run on Apache:</p>

<pre><code>$ /etc/init.d/apache2 restart
</code></pre>

                </div>
                <div class="article">
                    <h1>
                        <a href="/2011/6/emacs-dark-theme.html">
                            Emacs Dark Theme
                        </a>
                    </h1>
                    <p>Recently I updated my Emacs setup and decided to go for a more minimal
color theme. Especially on long coding nights you want a theme without
distracting colors.</p>

<p><img src="http://www.matthias-georgi.de/images/emacs-dark-theme.png" alt="Emacs dark theme"></p>

<h3>Configuration</h3>

<p>Just paste this code into your emacs condiguration:</p>

<pre><code> (set-face-attribute &#39;default nil
                     :background &quot;grey20&quot;
                     :foreground &quot;grey90&quot;)

 (set-face-attribute &#39;modeline nil
                     :background &quot;grey10&quot;
                     :foreground &quot;grey90&quot;)

 (set-face-attribute &#39;cursor nil
                     :background &quot;white&quot;)

 (set-face-attribute &#39;font-lock-builtin-face nil
                     :foreground &quot;grey60&quot;)

 (set-face-attribute &#39;font-lock-comment-face nil
                     :foreground &quot;grey60&quot;)

 (set-face-attribute &#39;font-lock-constant-face nil
                     :foreground &quot;grey60&quot;)

 (set-face-attribute &#39;font-lock-keyword-face nil
                     :foreground &quot;white&quot;)

 (set-face-attribute &#39;font-lock-string-face nil
                     :foreground &quot;white&quot;)

 (set-face-attribute &#39;font-lock-variable-name-face nil
                     :foreground &quot;lightblue&quot;)

 (set-face-attribute &#39;font-lock-function-name-face nil
                     :foreground &quot;lightblue&quot;)

 (set-face-attribute &#39;region nil
                     :background &quot;#111&quot;)                    
</code></pre>

<h3>Additional faces</h3>

<p>If you use speedbar or elscreen, you can set additional faces:</p>

<pre><code>(set-face-attribute &#39;speedbar-file-face nil
                    :foreground &quot;white&quot;)

(set-face-attribute &#39;elscreen-tab-background-face nil
                    :background &quot;grey10&quot;
                    :foreground &quot;grey90&quot;)

(set-face-attribute &#39;elscreen-tab-control-face nil
                    :background &quot;grey20&quot;
                    :foreground &quot;grey90&quot;)

(set-face-attribute &#39;elscreen-tab-current-screen-face nil
                    :background &quot;grey20&quot;
                    :foreground &quot;grey90&quot;)

(set-face-attribute &#39;elscreen-tab-other-screen-face nil
                    :background &quot;grey30&quot;
                    :foreground &quot;grey60&quot;)
</code></pre>

                </div>
                <div class="article">
                    <h1>
                        <a href="/2009/4/rackdav-web-authoring-for-rack.html">
                            RackDAV - Web Authoring for Rack
                        </a>
                    </h1>
                    <p>RackDAV is Handler for <a href="http://github.com/chneukirchen/rack">Rack</a>, which allows content authoring over
HTTP. RackDAV brings its own file backend, but other backends are
possible by subclassing RackDAV::Resource.</p>

<h2>Install</h2>

<p>Just install the gem from github:</p>

<pre><code>$ gem sources -a http://gems.github.com
$ sudo gem install georgi-rack_dav
</code></pre>

<h2>Quickstart</h2>

<p>If you just want to share a folder over WebDAV, you can just start a
simple server with:</p>

<pre><code>$ rack_dav
</code></pre>

<p>This will start a WEBrick server on port 3000, which you can connect
to without authentication.</p>

<h2>Rack Handler</h2>

<p>Using RackDAV inside a rack application is quite easy. A simple rackup
script looks like this:</p>

<pre><code>require &#39;rubygems&#39;
require &#39;rack_dav&#39;

use Rack::CommonLogger

run RackDAV::Handler.new(&#39;/path/to/docs&#39;)
</code></pre>

<h2>Implementing your own WebDAV resource</h2>

<p>RackDAV::Resource is an abstract base class and defines an interface
for accessing resources.</p>

<p>Each resource will be initialized with a path, which should be used to
find the real resource.</p>

<p>RackDAV::Handler needs to be initialized with the actual resource class:</p>

<pre><code>RackDAV::Handler.new(:resource_class =&gt; MyResource)
</code></pre>

<p>RackDAV needs some information about the resources, so you have to
implement following methods:</p>

<ul>
<li><p><strong>children</strong>: If this is a collection, return the child resources.</p></li>
<li><p><strong>collection?</strong>: Is this resource a collection?</p></li>
<li><p><strong>exist?</strong>: Does this recource exist?</p></li>
<li><p><strong>creation_date</strong>: Return the creation time.</p></li>
<li><p><strong>last_modified</strong>: Return the time of last modification.</p></li>
<li><p><strong>last_modified=(time)</strong>: Set the time of last modification.</p></li>
<li><p><strong>etag</strong>: Return an Etag, an unique hash value for this resource.</p></li>
<li><p><strong>content_type</strong>: Return the mime type of this resource.</p></li>
<li><p><strong>content_length</strong>: Return the size in bytes for this resource.</p></li>
</ul>

<p>Most importantly you have to implement the actions, which are called
to retrieve and change the resources:</p>

<ul>
<li><p><strong>get(request, response)</strong>: Write the content of the resource to the response.body.</p></li>
<li><p><strong>put(request, response)</strong>: Save the content of the request.body.</p></li>
<li><p><strong>post(request, response)</strong>: Usually forbidden.</p></li>
<li><p><strong>delete</strong>: Delete this resource.</p></li>
<li><p><strong>copy(dest)</strong>: Copy this resource to given destination resource.</p></li>
<li><p><strong>move(dest)</strong>: Move this resource to given destination resource.</p></li>
<li><p><strong>make_collection</strong>: Create this resource as collection.</p></li>
</ul>

<p>Note, that it is generally possible, that a resource object is
instantiated for a not yet existing resource.</p>

<p>For inspiration you should have a look at the FileResource
implementation. Please let me now, if you are going to implement a new
type of resource.</p>

<h3>RackDAV on GitHub</h3>

<p>Download or fork the project on its <a href="http://github.com/georgi/rack_dav">Github page</a></p>

                </div>
                <a rel="next" href="page-3.html">
                    Next entries
                </a>
            </div>
        </div>
    </body>
</html>
