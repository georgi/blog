<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Matthias Georgi - Shinmun, a small and beautiful blog engine</title>
    <meta http-equiv="Content-Language" content="English" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="alternate" type="application/rss+xml" title="RSS" href="http://feeds.feedburner.com/matthias-georgi" />
    <link rel="stylesheet" href="../../stylesheets/all.css?1220965610" media="screen"></link>
<link rel="stylesheet" href="../../stylesheets/style.css?1220965122" media="screen"></link>
    <script>var Blog = { root: '../../', guid: '7ad04f10-5dd6-012b-b53c-001a92975b89' };</script>
  </head>
  <body>
    <div class="container">

      <div id="header" class="column span-20 last">
	<h1><a href="../../index.html">Matthias Georgi</a></h1>
	<h2>Webdev, Gamedev, Interaction Design</h2>
      </div>

      <div id="navi"  class="column span-20 last">
	<ul>
	  <li><a class="" href="../../index.html">Home</a></li>
	  
	    <li><a class="active" href="../../categories/ruby.html">Ruby</a></li>
	  
	    <li><a class="" href="../../categories/javascript.html">Javascript</a></li>
	  
	    <li><a class="" href="../../categories/emacs.html">Emacs</a></li>
	  
	  <li><a class="" href="../../about.html">About</a></li>
	</ul>
      </div>

      
	<div id="header-text" class="column span-20 last">
	  <h1>Ruby</h1>
	</div>
      

      <div class="content column span-15"> 
	<div class="article">

  <div class="date">
    September 5, 2008
  </div>

  <h2>Shinmun, a small and beautiful blog engine</h2>  

  <p>Shinmun is a <strong>minimalist blog engine</strong>. You just write posts as text files,
render them to static files and push your blog to your server.</p>

<p>This allows you to write posts in your favorite editor like Emacs or
VI and use a VCS like git.</p>

<p>Your layout can be customized by set of <em>ERB templates</em>. These
templates have access to <code>Post</code> objects and <em>helper methods</em> so that
anybody who knows <em>Rails</em> should feel comfortable with it.</p>

<p>Shinmun has some common features of blog engines like:</p>

<ul>
<li>Index summary page</li>
<li>Category summary page</li>
<li>Archive pages for each month</li>
<li>RSS feeds for index and category pages</li>
<li>AJAX comment system with PHP JSON file storage</li>
<li>Integration of the WMD-Markdown Editor for comments</li>
</ul>

<h3>Blog Posts</h3>

<p>Each blog post is just a text file with an optional header section and
a markup body, which are separated by a newline. </p>

<p>The <strong>first line</strong> of the header should start with 3 dashes as usual
for a YAML document.</p>

<p>The <strong>first and the second line</strong> of the body becomes the title of the
post.</p>

<p>The header may have following attributes:</p>

<ul>
<li><code>date</code>: post will show up in blog page and archive pages</li>
<li><code>category</code>: post will show up in the defined category page</li>
<li><code>guid</code>: will be set automatically by Shinmun</li>
</ul>

<p>Posts without a date are by definition static pages.</p>

<p>Example post:</p>

<pre>

    --- 
    category: Ruby
    date: 2008-09-05
    guid: 7ad04f10-5dd6-012b-b53c-001a92975b89

    BlueCloth, a Markdown library
    =============================

    This is the summary, which is by definition the first paragraph of the
    article. The summary shows up in category listings or the index listing.

</pre>

<p>The guid should never change, as it will be you used for identifying
posts for comments.</p>

<h3>Directory layout</h3>

<ul>
<li><p>All your <strong>posts</strong> reside in the <code>posts</code> folder sorted by year/month.</p></li>
<li><p>All the <strong>output</strong> will be rendered to the <code>public</code> folder.</p></li>
<li><p><strong>Template</strong> files are the <code>templates</code> folder.</p></li>
<li><p>The <strong>blog description</strong>, <strong>base url</strong> and the <strong>category list</strong> are
defined in <code>posts/blog.yml</code></p></li>
<li><p><strong>Static files</strong> should be put into the directories <code>public/images</code>,
<code>public/stylesheets</code>, <code>public/javascripts</code>.</p></li>
<li><p>Archive pages will be rendered to files like <code>public/2008/9/index.html</code>.</p></li>
<li><p>Category pages will be rendered to files like <code>public/categories/ruby.html</code>.</p></li>
<li><p>The <em>home page</em> of your blog will go to <code>public/index.html</code>.</p></li>
</ul>

<p>An example tree:</p>

<pre><code>+ posts
  + blog.yml
  + about.md
  * 2007
    + 2008
      + 9
        + my-article.md

+ public
  + index.html
  + about.html
  + categories
    + emacs.html
    + ruby.html
  + 2007   
  + 2008
    + 9
      + my-article.html
  + images
  + stylesheets
  + javascripts

+ templates
  + feed.rxml
  + layout.rhtml
  + page.rhtml  
  + post.rhtml  
  + posts.rhtml
</code></pre>

<h3>Layout</h3>

<p>Layout and templates are rendered by good old <em>ERB</em>.  The layout will
be defined by the <code>layout.rhtml</code> template. The content will be
provided in the variable <code>@content</code>. A minimal example would be:</p>

<pre><code>&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;&lt;%= @blog_title %&gt;&lt;/title&gt;
    &lt;%= stylesheet_link_tag 'style' %&gt;
  &lt;/head&gt;
  &lt;body&gt;
     &lt;%= @content %&gt;
  &lt;/body&gt;
 &lt;/html&gt;
</code></pre>

<h3>Helpers</h3>

<p>There are also helper methods, which work the same way like the <em>Rails</em>
helpers. The most important ones are these:</p>

<ul>
<li>stylesheet<em>link</em>tag(*names):      </li>
<li>javascript_tag(*names)</li>
<li>image_tag(src, options = {})</li>
<li>link_to(text, path, options = {})</li>
</ul>

<p>Stylesheets, javascripts and images should be included by using theses
helpers. The helper methods will include a timestamp of the
modification time as <code>querystring</code>, so that the browser will fetch the
new resource if it has been changed.</p>

<h3>Post Template</h3>

<p>The attributes of a post are accessible as instance variables in a template:</p>

<pre><code>&lt;div class="article"&gt;    

  &lt;div class="date"&gt;
    &lt;%= date @date %&gt;
  &lt;/div&gt;

  &lt;h2&gt;&lt;%= @title %&gt;&lt;/h2&gt;  

  &lt;%= @body %&gt;

  &lt;h3&gt;Comments&lt;/h3&gt;

  &lt;!-- Here you may put my commenting system --&gt;
&lt;/div&gt;
</code></pre>

<h3>RSS Feeds</h3>

<p>Feeds will be rendered by one <em>ERB template</em>. Some of the variables
have been read from the <code>blog.yml</code>, like <code>@blog_title</code>, other variables
have been determined by the blog like <code>@posts</code> and <code>@category</code>.</p>

<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;rss version="2.0"&gt; 
  &lt;channel&gt;
    &lt;title&gt;&lt;%= @category ? @blog_title + ' - ' + @category : @blog_title %&gt;&lt;/title&gt;
    &lt;link&gt;&lt;%= @blog_url %&gt;&lt;/link&gt;
    &lt;description&gt;&lt;%= @category ? 'Category ' + @category : @blog_description %&gt;&lt;/description&gt;
    &lt;language&gt;&lt;%= @blog_language %&gt;&lt;/language&gt;
    &lt;copyright&gt;&lt;%= @blog_author %&gt;&lt;/copyright&gt;
    &lt;pubDate&gt;&lt;%= rfc822 Time.now %&gt;&lt;/pubDate&gt;
    &lt;% for post in @posts %&gt;
      &lt;item&gt;
        &lt;title&gt;&lt;%= post.title %&gt;&lt;/title&gt;
        &lt;description&gt;&lt;%= post.text_summary %&gt;&lt;/description&gt;
        &lt;link&gt;&lt;%= post.link %&gt;&lt;/link&gt;
        &lt;author&gt;&lt;%= @blog_author %&gt;&lt;/author&gt;
        &lt;guid&gt;&lt;%= post.guid %&gt;&lt;/guid&gt;
        &lt;pubDate&gt;&lt;%= rfc822 post.date %&gt;&lt;/pubDate&gt;
      &lt;/item&gt;
    &lt;% end %&gt;
  &lt;/channel&gt; 
&lt;/rss&gt;
</code></pre>

<h3>Commenting System</h3>

<p>As I am not willing to build up a whole Rails stack for a single blog,
I was looking for a simple storage for comments. I really like the
JSON format. It works seamlessly with Javascript libraries and can be
serialized and deserialized from almost any language.</p>

<p>Read about my <a href="commenting-system-with-lightweight-json-store.html">lightweight commenting system</a>.</p>

<h3>Download</h3>

<p>Download the package at my <a href="http://github.com/georgi/shinmun/tree/master">github repository</a></p>

  <hr/>

  <div style="padding-bottom:40px">
    <script type="text/javascript">
      if (typeof window.Delicious == "undefined") window.Delicious = {};
      Delicious.BLOGBADGE_DEFAULT_CLASS = 'delicious-blogbadge-line';
    </script>
    <script src="http://static.delicious.com/js/blogbadge.js"></script>
  </div>

  <h2>Comments</h2>

  <div class="comments-loading" style="display:none">
    <img src="../../images/loading.gif"></img>
    Loading Comments...
  </div>

  <div class="comments">  
    <div id="comments-template">
      <div class="comment">
	<div class="_ top">
	  <a class="_" href="{website}">{name}</a> said
	  <a class="_" title="{time}"></a>:
	</div>
	<div class="text"></div>
      </div>
    </div>
  </div>

  <hr/>  

  <div class="comment-form-loading" style="display:none">
    <img src="../../images/loading.gif"></img>
    Posting Comment...
  </div>

  <div class="comment-form">
    <h4>Leave a comment</h4>
    <form>
      <input type="hidden" name="guid" value="7ad04f10-5dd6-012b-b53c-001a92975b89"/>
      <p>
	<label>Name</label><br/>
	<input type="text" name="name" size="40"/>
      </p>
      <p>
	<label>Website</label><br/>
	<input type="text" name="website"  size="40"/>
      </p>
      <p>
	<label>Comment (Use markdown for formatting)</label><br/>
	<textarea name="text" cols="60" rows="10"></textarea>
      </p>
      <p>
	<input type="submit" value="Post comment"/>
      </p>
    </form>
  </div>
</div>



      </div>

      <div class="right column span-5 last"> 

	<h4>Subscribe</h4>

	<p>
	  <a href="http://feeds.feedburner.com/matthias-georgi" rel="alternate" type="application/rss+xml">
	    <img src="../../images/rss.png"></img>
	    <img src="http://feeds.feedburner.com/~fc/matthias-georgi?bg=99CCFF&amp;fg=444444&amp;anim=0" height="26" width="88"/>
	  </a>
	  <br/>
	  <a href="http://www.feedburner.com/fb/a/emailverifySubmit?feedId=2408112&amp;loc=en_US">
	    or subscribe by email
	  </a>
	</p>
	  
	<h4>About</h4>

	<div class="about">
	  Matthias Georgi lives in
	  <em>Darmstadt, Germany</em> and works as a freelance
	  software developer.
	  <a href="../../about.html">read more</a>
	</div>

	<h4>Archives</h4>

	<ul>
	  
	    <li><a href="../../2007/4/index.html">April 2007</a></li> 
	  
	    <li><a href="../../2007/5/index.html">May 2007</a></li> 
	  
	    <li><a href="../../2008/9/index.html">September 2008</a></li> 
	  
	</ul>

	<h4>Recent posts</h4>

	<ul>
	  
	    <li><a href="../../2008/9/patroon-a-javascript-template-engine.html">Patroon - a Javascript Template Engine</a></li> 
	  
	    <li><a href="../../2008/9/commenting-system-with-lightweight-json-store.html">Commenting system with lightweight JSON store</a></li> 
	  
	    <li><a href="../../2008/9/shinmun-a-small-and-beautiful-blog-engine.html">Shinmun, a small and beautiful blog engine</a></li> 
	  
	    <li><a href="../../2008/9/emacs-completions.html">Emacs Completions with Hippie-Expand and Snippets</a></li> 
	  
	    <li><a href="../../2007/5/google-like-search-results-helper.html">Google-like Search Results Helper</a></li> 
	  
	</ul>

	<h4>My Projects</h4>

	<ul>
	  <li>
	    <a href="http://github.com/georgi/shinmun/tree/master">
	      Shinmun at github
	    </a>
	  </li>
	  <li>
	    <a href="http://www.matthias-georgi.de/2008/9/shinmun-a-small-and-beautiful-blog-engine.html">
	      Shinmun description
	    </a>
	  </li>
	</ul>

	<h4>My Music</h4>

	<ul>
	  <li>
	    <a href="http://www.p-ersag.com">
	      Planet Ersag
	    </a>
	  </li>
	</ul>

      </div>
    </div>

    <script type="text/javascript" src="../../javascripts/all.js?1220965610"></script>
<script type="text/javascript" src="../../javascripts/showdown.js?1205881696"></script>
<script type="text/javascript" src="../../javascripts/template.js?1220960964"></script>
<script type="text/javascript" src="../../javascripts/default.js?1220656864"></script>
<script type="text/javascript" src="../../javascripts/comments.js?1220887453"></script>
<script type="text/javascript" src="../../javascripts/wmd.js?1205881696"></script>

    
      <script type="text/javascript" src="../../javascripts/highlight.js?1220965535"></script>
      <script type="text/javascript">
	hljs.initHighlightingOnLoad('ruby','html','xml');
      </script>
    

    <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>

    <script type="text/javascript">
      var pageTracker = _gat._getTracker("UA-927203-10");
      pageTracker._trackPageview();
    </script> 

  </body>
</html>
